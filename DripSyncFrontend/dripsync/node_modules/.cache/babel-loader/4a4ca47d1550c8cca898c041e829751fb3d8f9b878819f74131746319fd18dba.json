{"ast":null,"code":"var _jsxFileName = \"D:\\\\DripSync-MP\\\\DripSync_Repo\\\\DripSyncFrontend\\\\dripsync\\\\src\\\\Components\\\\ProfileSetup.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport CaptureImage from './CaptureImage'; // Assuming you have this component\nimport UploadPhoto from './UploadPhoto'; // Assuming you have this component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileSetup = () => {\n  _s();\n  const [attributes, setAttributes] = useState({\n    height: '',\n    weight: '',\n    age: '',\n    gender: '',\n    skin_tone: ''\n  });\n  const [photo, setPhoto] = useState(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isCaptureMode, setIsCaptureMode] = useState(false); // Toggle between upload and capture modes\n  const history = useHistory();\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAttributes({\n      ...attributes,\n      [name]: value\n    });\n  };\n  const handleFileChange = event => {\n    setPhoto(event.target.files[0]);\n  };\n  const handleCaptureImage = imageDataUrl => {\n    setCapturedImage(imageDataUrl);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n\n    // Append attributes to formData\n    formData.append('height', attributes.height);\n    formData.append('weight', attributes.weight);\n    formData.append('age', attributes.age);\n    formData.append('gender', attributes.gender);\n    formData.append('skin_tone', attributes.skin_tone);\n\n    // Append photo if available\n    if (photo) {\n      formData.append('photo', photo);\n    }\n\n    // Append captured image if available\n    if (capturedImage) {\n      formData.append('captured_image', capturedImage);\n    }\n    try {\n      const response = await fetch('/profile-setup/', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n        },\n        body: formData\n      });\n      const data = await response.json();\n      if (data.success) {\n        history.push('/home'); // Redirect to the profile page or desired path\n      } else {\n        console.error('Submission failed:', data.message);\n      }\n    } catch (error) {\n      console.error('Error submitting profile attributes', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"height\",\n        value: attributes.height,\n        onChange: handleChange,\n        placeholder: \"Height\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"weight\",\n        value: attributes.weight,\n        onChange: handleChange,\n        placeholder: \"Weight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"age\",\n        value: attributes.age,\n        onChange: handleChange,\n        placeholder: \"Age\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"gender\",\n        value: attributes.gender,\n        onChange: handleChange,\n        placeholder: \"Gender\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"skin_tone\",\n        value: attributes.skin_tone,\n        onChange: handleChange,\n        placeholder: \"Skin Tone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), isCaptureMode ? /*#__PURE__*/_jsxDEV(CaptureImage, {\n        onSave: handleCaptureImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(UploadPhoto, {\n        onFileChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setIsCaptureMode(!isCaptureMode),\n        children: isCaptureMode ? 'Upload Photo' : 'Capture Image'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n_s(ProfileSetup, \"Q6To/Ojw7O71s4OIdk1KNBmJyKc=\", false, function () {\n  return [useHistory];\n});\n_c = ProfileSetup;\nexport default ProfileSetup;\nvar _c;\n$RefreshReg$(_c, \"ProfileSetup\");","map":{"version":3,"names":["React","useState","useHistory","CaptureImage","UploadPhoto","jsxDEV","_jsxDEV","ProfileSetup","_s","attributes","setAttributes","height","weight","age","gender","skin_tone","photo","setPhoto","capturedImage","setCapturedImage","isCaptureMode","setIsCaptureMode","history","handleChange","e","name","value","target","handleFileChange","event","files","handleCaptureImage","imageDataUrl","handleSubmit","preventDefault","formData","FormData","append","response","fetch","method","headers","localStorage","getItem","body","data","json","success","push","console","error","message","children","onSubmit","type","onChange","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","onSave","onFileChange","onClick","_c","$RefreshReg$"],"sources":["D:/DripSync-MP/DripSync_Repo/DripSyncFrontend/dripsync/src/Components/ProfileSetup.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport CaptureImage from './CaptureImage'; // Assuming you have this component\r\nimport UploadPhoto from './UploadPhoto'; // Assuming you have this component\r\n\r\nconst ProfileSetup = () => {\r\n    const [attributes, setAttributes] = useState({\r\n        height: '',\r\n        weight: '',\r\n        age: '', \r\n        gender: '',\r\n        skin_tone: ''\r\n    });\r\n    const [photo, setPhoto] = useState(null);\r\n    const [capturedImage, setCapturedImage] = useState(null);\r\n    const [isCaptureMode, setIsCaptureMode] = useState(false); // Toggle between upload and capture modes\r\n    const history = useHistory();\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setAttributes({\r\n            ...attributes,\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    const handleFileChange = (event) => {\r\n        setPhoto(event.target.files[0]);\r\n    };\r\n\r\n    const handleCaptureImage = (imageDataUrl) => {\r\n        setCapturedImage(imageDataUrl);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n\r\n        // Append attributes to formData\r\n        formData.append('height', attributes.height);\r\n        formData.append('weight', attributes.weight);\r\n        formData.append('age', attributes.age);\r\n        formData.append('gender', attributes.gender);\r\n        formData.append('skin_tone', attributes.skin_tone);\r\n\r\n        // Append photo if available\r\n        if (photo) {\r\n            formData.append('photo', photo);\r\n        }\r\n\r\n        // Append captured image if available\r\n        if (capturedImage) {\r\n            formData.append('captured_image', capturedImage);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/profile-setup/', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n                },\r\n                body: formData\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                history.push('/home'); // Redirect to the profile page or desired path\r\n            } else {\r\n                console.error('Submission failed:', data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error submitting profile attributes', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSubmit}>\r\n                <input type=\"text\" name=\"height\" value={attributes.height} onChange={handleChange} placeholder=\"Height\" />\r\n                <input type=\"text\" name=\"weight\" value={attributes.weight} onChange={handleChange} placeholder=\"Weight\" />\r\n                <input type=\"text\" name=\"age\" value={attributes.age} onChange={handleChange} placeholder=\"Age\" />\r\n                <input type=\"text\" name=\"gender\" value={attributes.gender} onChange={handleChange} placeholder=\"Gender\" />\r\n                <input type=\"text\" name=\"skin_tone\" value={attributes.skin_tone} onChange={handleChange} placeholder=\"Skin Tone\" />\r\n\r\n                {isCaptureMode ? (\r\n                    <CaptureImage onSave={handleCaptureImage} />\r\n                ) : (\r\n                    <UploadPhoto onFileChange={handleFileChange} />\r\n                )}\r\n\r\n                <button type=\"button\" onClick={() => setIsCaptureMode(!isCaptureMode)}>\r\n                    {isCaptureMode ? 'Upload Photo' : 'Capture Image'}\r\n                </button>\r\n\r\n                <button type=\"submit\">Submit Profile</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileSetup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}